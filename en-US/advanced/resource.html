<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Resource Links Experimental | Satori</title>
    <meta name="description" content="The Universal Messenger Protocol">
    <meta name="generator" content="VitePress v1.5.0">
    <link rel="preload stylesheet" href="/assets/style.BTsSVzB4.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.DVODBIWl.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.CItjfcnn.js">
    <link rel="modulepreload" href="/assets/chunks/framework.xAOSN7W3.js">
    <link rel="modulepreload" href="/assets/en-US_advanced_resource.md.3Vxsu5Rp.lean.js">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-c1849dc6><!--[--><span tabindex="-1" data-v-c8291ffa></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-c8291ffa> Skip to content </a><!--]--><!----><header class="VPNav" data-v-c1849dc6 data-v-7ad780c2><div class="VPNavBar" data-v-7ad780c2 data-v-9fd4d1dd><div class="wrapper" data-v-9fd4d1dd><div class="container" data-v-9fd4d1dd><div class="title" data-v-9fd4d1dd><div class="VPNavBarTitle has-sidebar" data-v-9fd4d1dd data-v-9f43907a><a class="title" href="/en-US/" data-v-9f43907a><!--[--><!--]--><!----><span data-v-9f43907a>Satori</span><!--[--><!--]--></a></div></div><div class="content" data-v-9fd4d1dd><div class="content-body" data-v-9fd4d1dd><!--[--><!--]--><div class="VPNavBarSearch search" data-v-9fd4d1dd><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-9fd4d1dd data-v-afb2845e><span id="main-nav-aria-label" class="visually-hidden" data-v-afb2845e> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/en-US/protocol/" tabindex="0" data-v-afb2845e data-v-815115f5><!--[--><span data-v-815115f5>Protocol</span><!--]--></a><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-9fd4d1dd data-v-acee064b data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-bfe7971f><span class="text" data-v-bfe7971f><span class="vpi-languages option-icon" data-v-bfe7971f></span><!----><span class="vpi-chevron-down text-icon" data-v-bfe7971f></span></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><!----><!--[--><!--[--><div class="items" data-v-acee064b><p class="title" data-v-acee064b>English</p><!--[--><div class="VPMenuLink" data-v-acee064b data-v-7eeeb2dc><a class="VPLink link" href="/zh-CN/advanced/resource.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>简体中文</span><!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-9fd4d1dd data-v-3f90c1a5><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-3f90c1a5 data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-9fd4d1dd data-v-ef6192dc data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/satorijs" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-9fd4d1dd data-v-f953d92f data-v-bfe7971f><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-bfe7971f><span class="vpi-more-horizontal icon" data-v-bfe7971f></span></button><div class="menu" data-v-bfe7971f><div class="VPMenu" data-v-bfe7971f data-v-20ed86d6><!----><!--[--><!--[--><div class="group translations" data-v-f953d92f><p class="trans-title" data-v-f953d92f>English</p><!--[--><div class="VPMenuLink" data-v-f953d92f data-v-7eeeb2dc><a class="VPLink link" href="/zh-CN/advanced/resource.html" data-v-7eeeb2dc><!--[--><span data-v-7eeeb2dc>简体中文</span><!--]--></a></div><!--]--></div><div class="group" data-v-f953d92f><div class="item appearance" data-v-f953d92f><p class="label" data-v-f953d92f>Appearance</p><div class="appearance-action" data-v-f953d92f><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-f953d92f data-v-be9742d9 data-v-b4ccac88><span class="check" data-v-b4ccac88><span class="icon" data-v-b4ccac88><!--[--><span class="vpi-sun sun" data-v-be9742d9></span><span class="vpi-moon moon" data-v-be9742d9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-f953d92f><div class="item social-links" data-v-f953d92f><div class="VPSocialLinks social-links-list" data-v-f953d92f data-v-e71e869c><!--[--><a class="VPSocialLink no-icon" href="https://github.com/satorijs" aria-label="github" target="_blank" rel="noopener" data-v-e71e869c data-v-60a9a2d3><span class="vpi-social-github"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-9fd4d1dd data-v-6bee1efd><span class="container" data-v-6bee1efd><span class="top" data-v-6bee1efd></span><span class="middle" data-v-6bee1efd></span><span class="bottom" data-v-6bee1efd></span></span></button></div></div></div></div><div class="divider" data-v-9fd4d1dd><div class="divider-line" data-v-9fd4d1dd></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-c1849dc6 data-v-2488c25a><div class="container" data-v-2488c25a><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-2488c25a><span class="vpi-align-left menu-icon" data-v-2488c25a></span><span class="menu-text" data-v-2488c25a>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-2488c25a data-v-883964e0><button data-v-883964e0>Return to top</button><!----></div></div></div><div class="el-scrollbar VPSidebar" data-v-c1849dc6><div class="el-scrollbar__wrap el-scrollbar__wrap--hidden-default" style=""><aside class="el-scrollbar__view vp-sidebar-view" style=""><!--[--><div class="curtain"></div><nav class="vp-sidebar-nav"><!--[--><!--]--><!--[--><div class="group"><section class="VPSidebarItem level-0" data-v-edd2eed8><!----><div class="items" data-v-edd2eed8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/en-US/introduction.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Introduction</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group"><section class="VPSidebarItem level-0" data-v-edd2eed8><div class="item" role="button" tabindex="0" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><h2 class="text" data-v-edd2eed8>Protocol</h2><!----></div><div class="items" data-v-edd2eed8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/en-US/protocol/index.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Overview</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/en-US/protocol/api.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>API</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/en-US/protocol/events.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Events</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/en-US/protocol/message.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Message Encoding</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/en-US/protocol/elements.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Standard Elements</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group"><section class="VPSidebarItem level-0" data-v-edd2eed8><div class="item" role="button" tabindex="0" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><h2 class="text" data-v-edd2eed8>Resources</h2><!----></div><div class="items" data-v-edd2eed8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/en-US/resources/channel.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Channel</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/en-US/resources/guild.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Guild</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/en-US/resources/member.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Guild Member</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/en-US/resources/role.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Guild Role</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/en-US/resources/interaction.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Interaction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/en-US/resources/login.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Login</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/en-US/resources/message.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Message</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/en-US/resources/reaction.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Reaction</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/en-US/resources/user.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>User</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="group"><section class="VPSidebarItem level-0 has-active" data-v-edd2eed8><div class="item" role="button" tabindex="0" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><h2 class="text" data-v-edd2eed8>Advanced</h2><!----></div><div class="items" data-v-edd2eed8><!--[--><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/en-US/advanced/internal.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Cross Platform</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/en-US/advanced/passive.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Passive Requests</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/en-US/advanced/resource.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Resource Links</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/en-US/advanced/bridge.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Bridge</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-edd2eed8 data-v-edd2eed8><div class="item" data-v-edd2eed8><div class="indicator" data-v-edd2eed8></div><a class="VPLink link link" href="/en-US/advanced/meta.html" data-v-edd2eed8><!--[--><p class="text" data-v-edd2eed8>Meta</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav><!--]--></aside></div><!--[--><div class="el-scrollbar__bar is-horizontal" style="display:none;"><div class="el-scrollbar__thumb" style="width:0;transform:translateX(0%);"></div></div><div class="el-scrollbar__bar is-vertical" style="display:none;"><div class="el-scrollbar__thumb" style="height:0;transform:translateY(0%);"></div></div><!--]--></div><div id="VPContent" class="has-sidebar VPContent" data-v-c1849dc6><div class="VPDoc has-sidebar has-aside" data-v-c1849dc6 data-v-e6f2a212><!--[--><!--]--><div class="container" data-v-e6f2a212><div class="aside" data-v-e6f2a212><div class="aside-curtain" data-v-e6f2a212></div><div class="aside-container" data-v-e6f2a212><div class="aside-content" data-v-e6f2a212><div class="VPDocAside" data-v-e6f2a212 data-v-cb998dce><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-cb998dce data-v-f610f197><div class="content" data-v-f610f197><div class="outline-marker" data-v-f610f197></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-f610f197>On this page</div><ul class="VPDocOutlineItem root" data-v-f610f197 data-v-53c99d69><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-cb998dce></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-e6f2a212><div class="content-container" data-v-e6f2a212><!--[--><!--]--><main class="main" data-v-e6f2a212><div style="position:relative;" class="vp-doc _en-US_advanced_resource" data-v-e6f2a212><div><h1 id="resource-links" tabindex="-1">Resource Links <span class="VPBadge warning"><!--[-->Experimental<!--]--></span> <a class="header-anchor" href="#resource-links" aria-label="Permalink to &quot;Resource Links &lt;badge type=&quot;warning&quot;&gt;Experimental&lt;/badge&gt;&quot;">​</a></h1><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>This is an experimental feature and may change in future versions.</p></div><h3 id="api-upload-create" tabindex="-1">File Upload <a class="header-anchor" href="#api-upload-create" aria-label="Permalink to &quot;File Upload {#api-upload-create}&quot;">​</a></h3><blockquote class="route"><span class="VPBadge tip"><!--[-->POST<!--]--></span><code>/upload.create</code></blockquote><p>If the message to be sent contains images or other media resources, you can use this API to upload the file to the Satori server and convert it into a URL for use in message encoding.</p><p>Unlike other APIs, the upload request body follows the <a href="https://datatracker.ietf.org/doc/html/rfc7578#section-4" target="_blank" rel="noreferrer"><code>multipart/form-data</code></a> format. Example:</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>POST /v1/upload.create</span></span>
<span class="line"><span>Content-Type: multipart/form-data</span></span>
<span class="line"><span>Satori-Platform: discord</span></span>
<span class="line"><span>Satori-User-ID: 1234567890</span></span>
<span class="line"><span></span></span>
<span class="line"><span>--boundary</span></span>
<span class="line"><span>Content-Disposition: form-data; name=&quot;foo&quot;; filename=&quot;image1.png&quot;</span></span>
<span class="line"><span>Content-Type: image/png</span></span>
<span class="line"><span></span></span>
<span class="line"><span>binary-data</span></span>
<span class="line"><span>--boundary</span></span>
<span class="line"><span>Content-Disposition: form-data; name=&quot;bar&quot;; filename=&quot;image2.gif&quot;</span></span>
<span class="line"><span>Content-Type: image/gif</span></span>
<span class="line"><span></span></span>
<span class="line"><span>binary-data</span></span>
<span class="line"><span>--boundary--</span></span></code></pre></div><p>Here, the <code>name</code> field in <code>Content-Disposition</code> indicates the file identifier (required and must be unique), and <code>filename</code> indicates the file name (optional). <code>Content-Type</code> indicates the file type (required).</p><p>The response is a dictionary where each key corresponds to a file identifier in the request, and each value is a URL string that can be used in message encoding. Example response:</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">  &quot;foo&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;internal:discord/1234567890/_tmp/3j6emd92-image1.png&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#E06C75;">  &quot;bar&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#032F62;--shiki-dark:#98C379;">&quot;internal:discord/1234567890/_tmp/reacpmeq-image2.gif&quot;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#ABB2BF;">}</span></span></code></pre></div><p>When implementing this API: if the platform already supports file uploads, you can directly use the platform’s upload API and return the platform URL. If the platform does not support file uploads, it should fall back to the SDK’s default implementation.</p><p>SDKs may implement uploads on the local filesystem. Files uploaded to the local filesystem are further proxied through the <code>internal:</code> scheme and have a limited lifetime. Implementations may adjust the lifetime based on their needs; the recommended value is 5 minutes.</p><h3 id="internal-url" tabindex="-1">Internal URLs <a class="header-anchor" href="#internal-url" aria-label="Permalink to &quot;Internal URLs {#internal-url}&quot;">​</a></h3><p><code>internal:</code> is an internal URL scheme used to proxy platform-native APIs or resources that cannot be accessed directly from the public internet.</p><h4 id="format" tabindex="-1">Format Specification <a class="header-anchor" href="#format" aria-label="Permalink to &quot;Format Specification {#format}&quot;">​</a></h4><p>The standard internal URL format is:</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>internal:{platform}/{user.id}/{path}</span></span></code></pre></div><p>Where <code>platform</code> is the platform name, <code>user.id</code> is the login account, and <code>path</code> is the resource path.</p><p>SDKs may design resource paths as needed, but paths starting with underscore <code>_</code> are reserved for Satori itself and have fixed semantics. Currently reserved paths include:</p><ul><li><code>_tmp</code>: used by the SDK’s default file upload implementation;</li><li><code>_api</code>: used for API bridging/reflection.</li></ul><h4 id="scenario" tabindex="-1">Applicable Scenarios <a class="header-anchor" href="#scenario" aria-label="Permalink to &quot;Applicable Scenarios {#scenario}&quot;">​</a></h4><p>As mentioned above, when calling <code>/upload.create</code> on a platform that does not support uploads, you will receive an internal URL. Access to platform-native APIs is also handled through internal URLs. Besides that, there are additional scenarios where internal URLs apply.</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><strong>Scenario: request resources via platform API</strong></p><p>Some platforms use IDs to identify resource files (e.g. Lark). When you receive a message from the platform, you get a resource ID rather than a link. In that case, you need to call the platform API to convert the resource ID into a link before you can construct a valid message element.</p><p>To avoid unnecessary performance loss, a better approach is to pack the resource ID into an internal URL and construct the message element immediately. When the resource is actually needed, the platform API can be called then.</p></div><div class="tip custom-block"><p class="custom-block-title">TIP</p><p><strong>Scenario: resource links should not be exposed directly</strong></p><p>On some platforms, although the provided resource link is usable, it includes the bot token in plaintext and should not be exposed publicly (e.g. Telegram). For resources on these platforms, you also cannot use their links directly; they need to be wrapped in an internal URL. In this case, the internal URL acts purely as a proxy.</p></div><h4 id="comparison" tabindex="-1">Comparison with Other Approaches <a class="header-anchor" href="#comparison" aria-label="Permalink to &quot;Comparison with Other Approaches {#comparison}&quot;">​</a></h4><p>Compared with internal URLs, some other practices are not recommended. The approaches below come from implementations of classic chat protocols. Comparing them helps clarify the advantages of internal URLs.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p><strong>Not recommended: <code>data:</code> URLs</strong></p><p>A discouraged approach is to download the resource directly and convert it into a <code>data:</code> URL embedded into the message element. This is not recommended for two fatal reasons:</p><ul><li>Resources could have been loaded on demand, but are now forced to download locally, causing extra bandwidth consumption.</li><li>Encoding as <code>data:</code> greatly increases message size and severely impacts message processing performance.</li></ul></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p><strong>Not recommended: local proxy</strong></p><p>Another approach is for SDKs to provide an extra route for accessing resources (like the proxy route described below), and convert resource links into URLs that point to that route. Compared with internal URLs, this has two drawbacks:</p><ul><li>The generated links are coupled to the Satori server’s own address. Once the Satori server changes domain or port, all previous links will break, which is bad for migration and complex scenarios like bridging.</li><li>If you later extend other resource-related logic (e.g. downloading images locally), you end up “requesting yourself over the network”. Data that could have been transferred via memory or disk now incurs extra network overhead, which is an unnecessary performance loss.</li></ul></div><h3 id="proxy-route" tabindex="-1">Proxy Route <a class="header-anchor" href="#proxy-route" aria-label="Permalink to &quot;Proxy Route {#proxy-route}&quot;">​</a></h3><p>Suppose you are building a chat client based on Satori and want to use the resource URLs provided by the Satori protocol directly in HTML. In many cases, this is difficult:</p><ol><li>The URL is generated by the platform and uses anti-hotlinking, so it cannot be accessed via cross-origin requests;</li><li>The URL is an internal URL, which cannot be accessed directly in HTML.</li></ol><p>Therefore, SDKs should additionally provide a proxy route <code>/{version}/proxy/{url}</code> to access such resources. This route does not require the <code>Satori-Platform</code> and <code>Satori-User-ID</code> headers.</p><p>Two typical examples (corresponding to the cases above):</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki shiki-themes github-light one-dark-pro vp-code" tabindex="0"><code><span class="line"><span>GET /v1/proxy/https://cdn.discordapp.com/attachments/bf6f121d.jpg</span></span>
<span class="line"><span>GET /v1/proxy/internal:discord/1234567890/_tmp/3j6emd92-image1.png</span></span></code></pre></div><p>In concrete application scenarios, the proxy route may add response headers such as <code>Access-Control-Allow-Origin</code> to restrict or allow cross-origin requests as needed.</p><p>To determine which paths require proxying and to prevent abuse, Satori also introduces the <a href="./../protocol/events.html"><code>proxy_urls</code></a> field. This field records all (non-internal) resource URL prefixes that need to be proxied. On the application side, you can use it to decide whether a resource needs proxying.</p><p>Depending on the form of <code>url</code>, an SDK’s proxy route behaves differently:</p><ul><li>If <code>url</code> is not a valid URL, return 400.</li><li>If <code>url</code> is an internal URL (i.e. starts with <code>internal:</code>): <ul><li>If it does not match the internal URL format, return 400.</li><li>Parse <code>platform</code> and <code>user.id</code> from the URL and locate the corresponding login.</li><li>If the login exists, return using that login’s extension logic.</li><li>If the login does not exist, return 404.</li></ul></li><li>If <code>url</code> starts with a prefix listed in <a href="./../protocol/events.html"><code>proxy_urls</code></a>: <ul><li>The SDK downloads <code>url</code> and returns it (the SDK provides the proxy).</li></ul></li><li>Otherwise: return 403.</li></ul><h3 id="best-practice" tabindex="-1">Best Practices <a class="header-anchor" href="#best-practice" aria-label="Permalink to &quot;Best Practices {#best-practice}&quot;">​</a></h3><p>In summary, here are the best practices for resource links:</p><p>For <strong>core library developers</strong>, you should:</p><ol><li>Provide a <code>REGISTER_INTERNAL_ROUTE</code> method for registering internal URL routes for adapter implementations.</li><li>Provide a <code>DOWNLOAD_URL</code> method to download a URL as data, regardless of whether it is an internal URL.</li><li>Implement the built-in <code>/upload.create</code> API based on the local filesystem.</li><li>Implement the proxy route based on the <code>DOWNLOAD_URL</code> method.</li></ol><p>For <strong>adapter developers</strong>, you should:</p><ol><li>If the platform fits the internal URL <a href="#scenario">applicable scenarios</a>, call <code>REGISTER_INTERNAL_ROUTE</code> to register internal routes.</li><li>When receiving events: if any received resource link fits the internal URL scenarios, convert it into an internal URL.</li><li>When sending messages: based on platform behavior and the form of the resource URL, choose an appropriate strategy to download and send the resource.</li><li>If the platform supports file uploads: implement <code>/upload.create</code> to override the SDK’s default implementation.</li></ol></div></div></main><footer class="VPDocFooter" data-v-e6f2a212 data-v-1bcd8184><!--[--><!--]--><div class="edit-info" data-v-1bcd8184><div class="edit-link" data-v-1bcd8184><span class="VPLink no-icon edit-link-button" data-v-1bcd8184><!--[--><span class="vpi-square-pen edit-link-icon" data-v-1bcd8184></span> Edit this page<!--]--></span></div><!----></div><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-1bcd8184><span class="visually-hidden" id="doc-footer-aria-label" data-v-1bcd8184>Pager</span><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link prev" href="/en-US/advanced/passive.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Previous</span><span class="title" data-v-1bcd8184>Passive Requests</span><!--]--></a></div><div class="pager" data-v-1bcd8184><a class="VPLink link pager-link next" href="/en-US/advanced/bridge.html" data-v-1bcd8184><!--[--><span class="desc" data-v-1bcd8184>Next</span><span class="title" data-v-1bcd8184>Bridge</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!----></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"en-us_advanced_bridge.md\":\"CQsS20n1\",\"en-us_advanced_internal.md\":\"C8EtEA19\",\"en-us_advanced_meta.md\":\"7al0l0b0\",\"en-us_advanced_passive.md\":\"DFX2cJrK\",\"en-us_advanced_resource.md\":\"3Vxsu5Rp\",\"en-us_index.md\":\"C3iKiBsY\",\"en-us_introduction.md\":\"CScR2yHE\",\"en-us_protocol_api.md\":\"DqPx6s1W\",\"en-us_protocol_elements.md\":\"-gRERs4R\",\"en-us_protocol_events.md\":\"HcvCGEdO\",\"en-us_protocol_index.md\":\"g3bTVvmX\",\"en-us_protocol_message.md\":\"CpG3GMwo\",\"en-us_resources_channel.md\":\"DPIzCOlc\",\"en-us_resources_guild.md\":\"DDyniRHi\",\"en-us_resources_interaction.md\":\"BatnpS6N\",\"en-us_resources_login.md\":\"C9WLpWUj\",\"en-us_resources_member.md\":\"DJPqFWZ7\",\"en-us_resources_message.md\":\"BQQ4RyAQ\",\"en-us_resources_reaction.md\":\"B3sr4LJM\",\"en-us_resources_role.md\":\"Cp4FnbF-\",\"en-us_resources_user.md\":\"-BbMxH8p\",\"readme.md\":\"Dp45x8rU\",\"zh-cn_advanced_bridge.md\":\"C6D-J0vq\",\"zh-cn_advanced_internal.md\":\"CdoxUX4j\",\"zh-cn_advanced_meta.md\":\"DN_mp37F\",\"zh-cn_advanced_passive.md\":\"BbYNmZpS\",\"zh-cn_advanced_resource.md\":\"Bk-cZLiw\",\"zh-cn_index.md\":\"Blh-yX9s\",\"zh-cn_introduction.md\":\"BCL-7SPt\",\"zh-cn_protocol_api.md\":\"B7_nfvX8\",\"zh-cn_protocol_elements.md\":\"CDCz548e\",\"zh-cn_protocol_events.md\":\"Chw9tLBF\",\"zh-cn_protocol_index.md\":\"DmFFx0bZ\",\"zh-cn_protocol_message.md\":\"DSE-NUke\",\"zh-cn_resources_channel.md\":\"DEM2PTwu\",\"zh-cn_resources_emoji.md\":\"DGBYbF4Q\",\"zh-cn_resources_guild.md\":\"BEzTLg14\",\"zh-cn_resources_interaction.md\":\"CkPml2lp\",\"zh-cn_resources_login.md\":\"BsGWy1Gz\",\"zh-cn_resources_member.md\":\"CnL5oVeL\",\"zh-cn_resources_message.md\":\"C0tPTw_z\",\"zh-cn_resources_reaction.md\":\"-NzC-qqk\",\"zh-cn_resources_role.md\":\"BMfuw-Ou\",\"zh-cn_resources_user.md\":\"J1Yh9pn0\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Satori\",\"description\":\"The Universal Messenger Protocol\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"outline\":[2,3],\"search\":{\"provider\":\"local\",\"options\":{\"detailedView\":true}},\"label\":\"简体中文\",\"lang\":\"zh-CN\",\"themeConfig\":{\"outlineTitle\":\"目录\",\"lastUpdatedText\":\"上次更新\",\"editLink\":{\"text\":\"编辑此页面\"},\"docFooter\":{\"prev\":\"上一页\",\"next\":\"下一页\"},\"search\":{\"options\":{\"translations\":{\"button\":{\"buttonText\":\"搜索\",\"buttonAriaLabel\":\"搜索\"},\"modal\":{\"displayDetails\":\"显示详细列表\",\"resetButtonTitle\":\"重置搜索\",\"backButtonTitle\":\"关闭搜索\",\"noResultsText\":\"没有结果\",\"footer\":{\"selectText\":\"选择\",\"selectKeyAriaLabel\":\"输入\",\"navigateText\":\"导航\",\"navigateUpKeyAriaLabel\":\"上箭头\",\"navigateDownKeyAriaLabel\":\"下箭头\",\"closeText\":\"关闭\",\"closeKeyAriaLabel\":\"esc\"}}}}},\"darkModeSwitchLabel\":\"外观\",\"sidebarMenuLabel\":\"菜单\",\"returnToTopLabel\":\"返回顶部\",\"langMenuLabel\":\"语言\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/satorijs\"}],\"crowdin\":null},\"locales\":{\"zh-CN\":{\"label\":\"简体中文\",\"lang\":\"zh-CN\",\"themeConfig\":{\"outlineTitle\":\"目录\",\"lastUpdatedText\":\"上次更新\",\"editLink\":{\"text\":\"编辑此页面\"},\"docFooter\":{\"prev\":\"上一页\",\"next\":\"下一页\"},\"search\":{\"options\":{\"translations\":{\"button\":{\"buttonText\":\"搜索\",\"buttonAriaLabel\":\"搜索\"},\"modal\":{\"displayDetails\":\"显示详细列表\",\"resetButtonTitle\":\"重置搜索\",\"backButtonTitle\":\"关闭搜索\",\"noResultsText\":\"没有结果\",\"footer\":{\"selectText\":\"选择\",\"selectKeyAriaLabel\":\"输入\",\"navigateText\":\"导航\",\"navigateUpKeyAriaLabel\":\"上箭头\",\"navigateDownKeyAriaLabel\":\"下箭头\",\"closeText\":\"关闭\",\"closeKeyAriaLabel\":\"esc\"}}}}},\"darkModeSwitchLabel\":\"外观\",\"sidebarMenuLabel\":\"菜单\",\"returnToTopLabel\":\"返回顶部\",\"langMenuLabel\":\"语言\",\"nav\":[{\"text\":\"协议\",\"link\":\"/zh-CN/protocol/\",\"activeMatch\":\"^/zh-CN^/(protocol|resources)/\"}],\"sidebar\":{\"/zh-CN/\":[{\"text\":\"介绍\",\"link\":\"/zh-CN/introduction.md\"},{\"text\":\"协议\",\"items\":[{\"text\":\"总览\",\"link\":\"/zh-CN/protocol/index.md\"},{\"text\":\"API\",\"link\":\"/zh-CN/protocol/api.md\"},{\"text\":\"事件\",\"link\":\"/zh-CN/protocol/events.md\"},{\"text\":\"消息编码\",\"link\":\"/zh-CN/protocol/message.md\"},{\"text\":\"标准元素\",\"link\":\"/zh-CN/protocol/elements.md\"}]},{\"text\":\"资源\",\"items\":[{\"text\":\"频道 (Channel)\",\"link\":\"/zh-CN/resources/channel.md\"},{\"text\":\"群组 (Guild)\",\"link\":\"/zh-CN/resources/guild.md\"},{\"text\":\"群组成员 (GuildMember)\",\"link\":\"/zh-CN/resources/member.md\"},{\"text\":\"群组角色 (GuildRole)\",\"link\":\"/zh-CN/resources/role.md\"},{\"text\":\"交互 (Interaction)\",\"link\":\"/zh-CN/resources/interaction.md\"},{\"text\":\"登录信息 (Login)\",\"link\":\"/zh-CN/resources/login.md\"},{\"text\":\"消息 (Message)\",\"link\":\"/zh-CN/resources/message.md\"},{\"text\":\"表态 (Reaction)\",\"link\":\"/zh-CN/resources/reaction.md\"},{\"text\":\"用户 (User)\",\"link\":\"/zh-CN/resources/user.md\"}]},{\"text\":\"进阶\",\"items\":[{\"text\":\"跨平台\",\"link\":\"/zh-CN/advanced/internal.md\"},{\"text\":\"被动请求\",\"link\":\"/zh-CN/advanced/passive.md\"},{\"text\":\"资源链接\",\"link\":\"/zh-CN/advanced/resource.md\"},{\"text\":\"桥接\",\"link\":\"/zh-CN/advanced/bridge.md\"},{\"text\":\"元信息\",\"link\":\"/zh-CN/advanced/meta.md\"}]}]}}},\"en-US\":{\"label\":\"English\",\"lang\":\"en-US\",\"themeConfig\":{\"outlineTitle\":\"On this page\",\"lastUpdatedText\":\"Last updated\",\"editLink\":{\"text\":\"Edit this page\"},\"docFooter\":{\"prev\":\"Previous\",\"next\":\"Next\"},\"docsearch\":{\"placeholder\":\"Search the documentation\",\"translations\":{\"button\":{\"buttonText\":\"Search\",\"buttonAriaLabel\":\"Search\"},\"modal\":{\"searchBox\":{\"resetButtonTitle\":\"Clear the query\",\"resetButtonAriaLabel\":\"Clear the query\",\"cancelButtonText\":\"Cancel\",\"cancelButtonAriaLabel\":\"Cancel\"},\"startScreen\":{\"recentSearchesTitle\":\"Recent\",\"noRecentSearchesText\":\"No recent searches\",\"saveRecentSearchButtonTitle\":\"Save this search\",\"removeRecentSearchButtonTitle\":\"Remove this search from history\",\"favoriteSearchesTitle\":\"Favorite\",\"removeFavoriteSearchButtonTitle\":\"Remove from favorites\"},\"errorScreen\":{\"titleText\":\"Unable to fetch results\",\"helpText\":\"You might want to check your network connection.\"},\"footer\":{\"selectText\":\"to select\",\"navigateText\":\"to navigate\",\"closeText\":\"to close\",\"searchByText\":\"search by\"},\"noResultsScreen\":{\"noResultsText\":\"No results for\",\"suggestedQueryText\":\"Try searching for\",\"reportMissingResultsText\":\"Believe this query should return results?\",\"reportMissingResultsLinkText\":\"Let us know.\"}}}},\"darkModeSwitchLabel\":\"Appearance\",\"sidebarMenuLabel\":\"Menu\",\"returnToTopLabel\":\"Return to top\",\"langMenuLabel\":\"Change language\",\"nav\":[{\"text\":\"Protocol\",\"link\":\"/en-US/protocol/\",\"activeMatch\":\"^/en-US^/(protocol|resources)/\"}],\"sidebar\":{\"/en-US/\":[{\"text\":\"Introduction\",\"link\":\"/en-US/introduction.md\"},{\"text\":\"Protocol\",\"items\":[{\"text\":\"Overview\",\"link\":\"/en-US/protocol/index.md\"},{\"text\":\"API\",\"link\":\"/en-US/protocol/api.md\"},{\"text\":\"Events\",\"link\":\"/en-US/protocol/events.md\"},{\"text\":\"Message Encoding\",\"link\":\"/en-US/protocol/message.md\"},{\"text\":\"Standard Elements\",\"link\":\"/en-US/protocol/elements.md\"}]},{\"text\":\"Resources\",\"items\":[{\"text\":\"Channel\",\"link\":\"/en-US/resources/channel.md\"},{\"text\":\"Guild\",\"link\":\"/en-US/resources/guild.md\"},{\"text\":\"Guild Member\",\"link\":\"/en-US/resources/member.md\"},{\"text\":\"Guild Role\",\"link\":\"/en-US/resources/role.md\"},{\"text\":\"Interaction\",\"link\":\"/en-US/resources/interaction.md\"},{\"text\":\"Login\",\"link\":\"/en-US/resources/login.md\"},{\"text\":\"Message\",\"link\":\"/en-US/resources/message.md\"},{\"text\":\"Reaction\",\"link\":\"/en-US/resources/reaction.md\"},{\"text\":\"User\",\"link\":\"/en-US/resources/user.md\"}]},{\"text\":\"Advanced\",\"items\":[{\"text\":\"Cross Platform\",\"link\":\"/en-US/advanced/internal.md\"},{\"text\":\"Passive Requests\",\"link\":\"/en-US/advanced/passive.md\"},{\"text\":\"Resource Links\",\"link\":\"/en-US/advanced/resource.md\"},{\"text\":\"Bridge\",\"link\":\"/en-US/advanced/bridge.md\"},{\"text\":\"Meta\",\"link\":\"/en-US/advanced/meta.md\"}]}]}}}},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>